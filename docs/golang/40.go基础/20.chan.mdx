---
title: 通道
slug: /basics/chan
---

import FullScreenImage from '@site/src/components/FullScreenImage';
import BrowserWindow from '@site/src/components/BrowserWindow';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<!--package-->

在 Go 中，通道（chan）是一种类似队列的数据结构，可以用于不同 Go 协程之间传递数据。

通道可以分为无缓冲通道和有缓冲通道。

对于无缓冲通道来说，它需要通道两端同时读取和推送，才能进行通信。如果只有一端读取或者推送，那么将会阻塞直至另一端有协程操作。

对于有缓存通道来说，它有一定的缓冲区，因此它支持一定程度上的单向操作。比如推送，可以不同另一端实时读取，而是将数据放到缓冲区中。
当缓冲区满了的时候，有缓冲通道表现的就像无缓冲通道一样了。


## 初始化

chan 只能使用 make 进行初始化。并可以通过 make 指定是否有缓冲区以及缓冲区的大小。

```go title="无缓冲通道"
ch := make(chan int)
```
```go title="有缓冲通道"
ch := make(chan int, 10)
```


## 操作

在 Go 中，通道的操作都是通过左箭头实现的。

### 推送

通过 `chan <- data` 的方式实现数据推送。

```go title="有缓冲通道"
ch := make(chan int, 10)
ch <- 1 // 非阻塞
ch <- 1 // 非阻塞
ch <- 1 // 非阻塞
```


### 读取

通过 `data := <- chan` 的方式实现数据读取。
```go title="有缓冲通道"
ch := make(chan int, 10)
ch <- 1 // 非阻塞
ch <- 1 // 非阻塞
ch <- 1 // 非阻塞

v1 := <- ch
v2 := <- ch
v3 := <- ch
fmt.Println(v1, v2, v3)
```


